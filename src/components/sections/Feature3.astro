---
/**
 * ============================================================================
 * FEATURE3 - Feature Section with Dashboard Image
 * ============================================================================
 *
 * A feature section with centered header, large dashboard screenshot, and
 * feature grid below.
 *
 * FEATURES:
 * - Optional eyebrow/tagline text at top
 * - Large centered headline
 * - Centered description text
 * - Full-width dashboard/screenshot image
 * - 3-column feature grid (2 rows)
 * - Each feature has icon, title, and description
 * - Mobile-first responsive design
 * - Full dark mode support
 * - Accessibility optimized
 *
 * USAGE:
 * <Feature3
 *   eyebrow="Everything you need"
 *   headline="No server? No problem."
 *   description="Lorem ipsum..."
 *   image="https://..."
 *   features={[
 *     { icon: "...", title: "Feature", description: "..." }
 *   ]}
 * />
 *
 * NOTE: This component has no background. Use on pages with dark gradient backgrounds.
 * ============================================================================
 */

import Image from '~/components/common/Image.astro';
import { HEADLINE_CLASSES, SUBTITLE_CLASSES, TEXT_MUTED } from '~/config/theme';
import type { ImageMetadata } from 'astro';

export const metadata = {
  name: 'Feature3',
  path: 'src/components/sections/Feature3.astro',
  description:
    'Feature section with centered header, large dashboard image, and 3-column feature grid below.',
};

export { SECTION_BACKGROUND as background } from '~/config/theme';

interface Feature {
  /** SVG icon path data */
  icon: string;
  /** Feature title */
  title: string;
  /** Feature description text */
  description: string;
}

interface Props {
  /** Optional eyebrow/tagline text */
  eyebrow?: string;
  /** Main headline text */
  headline?: string;
  /** Description text below headline */
  description?: string;
  /** Dashboard/screenshot image URL or ImageMetadata */
  image?: string | ImageMetadata;
  /** Array of features to display */
  features?: Feature[];
}

const defaultProps: Props = {
  eyebrow: 'Everything you need',
  headline: 'No server? No problem.',
  description:
    'Lorem ipsum, dolor sit amet consectetur adipisicing elit. Maiores impedit perferendis suscipit eaque, iste dolor cupiditate blanditiis.',
  image:
    'https://images.unsplash.com/photo-1677147167394-efb606430d8a?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTR8fGZlYXR1cmVzfGVufDB8MHwwfHx8fDA%3D',
  features: [
    {
      icon: 'M3 17v2a2 2 0 002 2h14a2 2 0 002-2v-2M8 12l4-4m0 0l4 4m-4-4v12',
      title: 'Push to deploy',
      description:
        'Lorem ipsum, dolor sit amet consectetur adipisicing elit aute id magna.',
    },
    {
      icon: 'M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z',
      title: 'SSL certificates',
      description:
        'Anim aute id magna aliqua ad ad non deserunt sunt. Qui irure qui lorem cupidatat commodo.',
    },
    {
      icon: 'M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15',
      title: 'Simple queues',
      description: 'Ac tincidunt sapien vehicula erat auctor pellentesque rhoncus.',
    },
    {
      icon: 'M12 11c0 3.517-1.009 6.799-2.753 9.571m-3.44-2.04l.054-.09A13.916 13.916 0 008 11a4 4 0 118 0c0 1.017-.07 2.019-.203 3m-2.118 6.844A21.88 21.88 0 0015.171 17m3.839 1.132c.645-2.266.99-4.659.99-7.132A8 8 0 008 4.07M3 15.364c.64-1.319 1-2.8 1-4.364 0-1.457.39-2.823 1.07-4',
      title: 'Advanced security',
      description:
        'Lorem ipsum, dolor sit amet consectetur adipisicing elit aute id magna.',
    },
    {
      icon: 'M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z M15 12a3 3 0 11-6 0 3 3 0 016 0z',
      title: 'Powerful API',
      description:
        'Anim aute id magna aliqua ad ad non deserunt sunt. Qui irure qui lorem cupidatat commodo.',
    },
    {
      icon: 'M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4',
      title: 'Database backups',
      description: 'Ac tincidunt sapien vehicula erat auctor pellentesque rhoncus.',
    },
  ],
};

const { eyebrow, headline, description, image, features } = { ...defaultProps, ...Astro.props };
---

<section class="relative w-full overflow-hidden py-16 sm:py-20 lg:py-24">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <!-- Header content -->
    <div class="text-center space-y-4 sm:space-y-6 mb-12 sm:mb-16 max-w-3xl mx-auto">
      <!-- Eyebrow text -->
      {eyebrow && (
        <div class="text-sm font-semibold text-indigo-400 tracking-wide">
          {eyebrow}
        </div>
      )}

      <!-- Headline -->
      <h2 class={HEADLINE_CLASSES}>
        {headline}
      </h2>

      <!-- Description -->
      <p class={`${SUBTITLE_CLASSES} ${TEXT_MUTED}`}>
        {description}
      </p>
    </div>

    <!-- Dashboard Image -->
    <div class="mb-12 sm:mb-16 lg:mb-20">
      <div class="rounded-2xl overflow-hidden shadow-2xl shadow-slate-900/50">
        <Image
          src={image}
          alt="Dashboard screenshot"
          class="w-full h-auto"
          width={2400}
          height={1600}
          widths={[640, 768, 1024, 1536, 2048, 2400]}
          sizes="(max-width: 640px) 100vw, (max-width: 1024px) 90vw, 1280px"
          loading="lazy"
        />
      </div>
    </div>

    <!-- Features grid -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8 sm:gap-10 lg:gap-12">
      {features.map((feature) => (
        <div class="flex gap-4">
          <!-- Icon -->
          <div class="flex-shrink-0 w-10 h-10 rounded-lg bg-indigo-500/10 flex items-center justify-center">
            <svg class="w-5 h-5 text-indigo-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" d={feature.icon} />
            </svg>
          </div>

          <!-- Text -->
          <div class="flex-1 space-y-2">
            <h3 class="text-base font-semibold text-white">
              {feature.title}
            </h3>
            <p class={`text-sm ${TEXT_MUTED}`}>
              {feature.description}
            </p>
          </div>
        </div>
      ))}
    </div>
  </div>
</section>
