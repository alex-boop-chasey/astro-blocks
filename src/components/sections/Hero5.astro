---
import Image from '~/components/common/Image.astro';
import Button from '~/components/ui/Button.astro';
import { HEADLINE_CLASSES, SUBTITLE_CLASSES, TEXT_MUTED } from '~/config/theme';
import type { ImageMetadata } from 'astro';

export const metadata = {
  name: 'Hero5',
  path: 'src/components/sections/Hero5.astro',
  description:
    'Split hero with brand mark, announcement pill, left-aligned content, and a full-height image panel on the right. Includes dual CTA buttons and mobile image fallback.',
};

export { SECTION_BACKGROUND as background } from '~/config/theme';

interface Props {
  announcementText?: string;
  announcementLink?: string;
  announcementLinkText?: string;
  headline: string;
  subtitle: string;
  primaryButtonText?: string;
  primaryButtonLink?: string;
  secondaryButtonText?: string;
  secondaryButtonLink?: string;
  image: string | ImageMetadata;
}

const defaultProps: Props = {
  announcementText: 'Anim qute id magna aliqua ad ad non deserunt sunt.',
  announcementLink: '#',
  announcementLinkText: 'Read more',
  headline: 'Data to enrich your business',
  subtitle:
    'Anim aute id magna aliqua ad ad non deserunt sunt. Qui irure qui lorem cupidatat commodo. Elit sunt amet fugiat veniam occaecat.',
  primaryButtonText: 'Get started',
  primaryButtonLink: '#',
  secondaryButtonText: 'Learn more',
  secondaryButtonLink: '#',
  image:
    'https://images.unsplash.com/photo-1497091071254-cc9b2ba7c48a?w=900&auto=format&fit=crop&q=60&ixlib=rb-4.1.0&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MTV8fGRlc2lnbnxlbnwwfDB8MHx8fDA%3D',
};

const {
  announcementText = 'Anim qute id magna aliqua ad ad non deserunt sunt.',
  announcementLink = '#',
  announcementLinkText = 'Read more',
  headline,
  subtitle,
  primaryButtonText = 'Get started',
  primaryButtonLink = '#',
  secondaryButtonText = 'Learn more',
  secondaryButtonLink = '#',
  image,
} = { ...defaultProps, ...Astro.props };
---

<section class="relative w-full min-h-screen overflow-hidden text-white">
  <!-- Right image panel (desktop) -->
  <div class="absolute inset-y-0 right-0 hidden lg:block lg:w-1/2">
    <Image
      src={image}
      alt="Workspace with laptop"
      class="h-full w-full object-cover"
      width={2102}
      height={1400}
      widths={[768, 1024, 1280, 1536, 1920]}
      sizes="(max-width: 1024px) 100vw, 50vw"
      loading="eager"
    />
  </div>

  <div class="relative z-10 max-w-7xl mx-auto px-6 sm:px-8 lg:px-12 py-20 sm:py-24 lg:py-32">
    <div class="max-w-xl space-y-8">
      <div class="flex items-center gap-3 text-indigo-400">
        <svg class="h-6 w-6" viewBox="0 0 24 24" fill="currentColor" aria-hidden="true">
          <path d="M3 10.5c2.5 0 3.2-3 5.6-3 2.4 0 3.1 3 5.6 3 2.4 0 3.1-3 5.6-3v3c-2.4 0-3.1 3-5.6 3-2.4 0-3.1-3-5.6-3-2.4 0-3.1 3-5.6 3v-3z" />
        </svg>
        <span class="text-sm font-semibold uppercase tracking-wide">Astro</span>
      </div>

      {announcementText && (
        <div class="announcement-pill">
          <span class="announcement-pill-text">{announcementText}</span>
          <a
            href={announcementLink}
            class="announcement-pill-link"
          >
            {announcementLinkText}
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-4-4l4 4-4 4" />
            </svg>
          </a>
        </div>
      )}

      <h1 class={HEADLINE_CLASSES}>
        {headline}
      </h1>

      <p class={`${SUBTITLE_CLASSES} ${TEXT_MUTED}`}>
        {subtitle}
      </p>

      <div class="flex flex-col sm:flex-row items-center gap-4">
        <Button variant="primary" href={primaryButtonLink} class="w-full sm:w-auto">
          {primaryButtonText}
        </Button>
        <Button variant="secondary" href={secondaryButtonLink} showArrow={true} class="w-full sm:w-auto">
          {secondaryButtonText}
        </Button>
      </div>
    </div>

    <!-- Mobile image -->
    <div class="mt-12 lg:hidden">
      <Image
        src={image}
        alt="Workspace with laptop"
        class="h-64 w-full rounded-2xl object-cover"
        width={2102}
        height={1400}
        widths={[480, 768, 1024, 1280]}
        sizes="100vw"
        loading="lazy"
      />
    </div>
  </div>
</section>
