---
import Image from '~/components/common/Image.astro';
import Button from '~/components/ui/Button.astro';
import type { ImageMetadata } from 'astro';

export const metadata = {
  name: 'Hero4',
  path: 'src/components/sections/Hero4.astro',
  description:
    'Split hero section with announcement pill, angled image panel, and dual CTA buttons. Includes a mobile image fallback.',
};

export { SECTION_BACKGROUND as background } from '~/config/theme';

interface Props {
  announcementText?: string;
  announcementLink?: string;
  announcementLinkText?: string;
  headline: string;
  subtitle: string;
  primaryButtonText?: string;
  primaryButtonLink?: string;
  secondaryButtonText?: string;
  secondaryButtonLink?: string;
  image: string | ImageMetadata;
}

const defaultProps: Props = {
  announcementText: 'Anim qute id magna aliqua ad ad non deserunt sunt.',
  announcementLink: '#',
  announcementLinkText: 'Read more',
  headline: 'Data to enrich your business',
  subtitle:
    'Anim aute id magna aliqua ad ad non deserunt sunt. Qui irure qui lorem cupidatat commodo. Elit sunt amet fugiat veniam occaecat fugiat aliqua.',
  primaryButtonText: 'Get started',
  primaryButtonLink: '#',
  secondaryButtonText: 'Learn more',
  secondaryButtonLink: '#',
  image:
    'https://images.unsplash.com/photo-1483389127117-b6a2102724ae?ixlib=rb-4.0.3&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1587&q=80',
};

const {
  announcementText = 'Anim qute id magna aliqua ad ad non deserunt sunt.',
  announcementLink = '#',
  announcementLinkText = 'Read more',
  headline,
  subtitle,
  primaryButtonText = 'Get started',
  primaryButtonLink = '#',
  secondaryButtonText = 'Learn more',
  secondaryButtonLink = '#',
  image,
} = { ...defaultProps, ...Astro.props };
---

<section class="relative w-full min-h-screen overflow-hidden bg-slate-950 text-white">
  <!-- Right image panel (desktop) -->
  <div
    class="absolute inset-y-0 right-0 hidden lg:block lg:w-1/2"
    style="clip-path: polygon(14% 0, 100% 0, 100% 100%, 0 100%);"
  >
    <Image
      src={image}
      alt="Person working on a laptop at sunset"
      class="h-full w-full object-cover"
      width={1587}
      height={1058}
      widths={[768, 1024, 1280, 1536, 1920]}
      sizes="(max-width: 1024px) 100vw, 50vw"
      loading="eager"
    />
  </div>

  <div class="relative z-10 max-w-7xl mx-auto px-6 sm:px-8 lg:px-12 py-20 sm:py-24 lg:py-32">
    <div class="max-w-xl space-y-8">
      {announcementText && (
        <div class="announcement-pill">
          <span class="announcement-pill-text">{announcementText}</span>
          <a
            href={announcementLink}
            class="announcement-pill-link"
          >
            {announcementLinkText}
            <svg class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 12h14m-4-4l4 4-4 4" />
            </svg>
          </a>
        </div>
      )}

      <h1 class="text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold tracking-tight">
        {headline}
      </h1>

      <p class="text-base sm:text-lg md:text-xl text-slate-400 leading-relaxed">
        {subtitle}
      </p>

      <div class="flex flex-col sm:flex-row items-center gap-4">
        <Button variant="primary" href={primaryButtonLink} class="w-full sm:w-auto">
          {primaryButtonText}
        </Button>
        <Button variant="secondary" href={secondaryButtonLink} showArrow={true} class="w-full sm:w-auto">
          {secondaryButtonText}
        </Button>
      </div>
    </div>

    <!-- Mobile image -->
    <div class="mt-12 lg:hidden">
      <Image
        src={image}
        alt="Person working on a laptop at sunset"
        class="h-64 w-full rounded-2xl object-cover"
        width={1587}
        height={1058}
        widths={[480, 768, 1024, 1280]}
        sizes="100vw"
        loading="lazy"
      />
    </div>
  </div>
</section>
